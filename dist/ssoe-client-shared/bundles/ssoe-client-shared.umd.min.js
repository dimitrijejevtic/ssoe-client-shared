!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("lodash/cloneDeep"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("@angular/material"),require("@angular/forms"),require("@angular/material/dialog"),require("@angular/material/snack-bar"),require("@angular/common"),require("@angular/cdk/drag-drop"),require("@angular/flex-layout"),require("@angular/cdk/scrolling"),require("@angular/router")):"function"==typeof define&&define.amd?define("ssoe-client-shared",["exports","@angular/core","lodash/cloneDeep","@angular/common/http","rxjs","rxjs/operators","@angular/material","@angular/forms","@angular/material/dialog","@angular/material/snack-bar","@angular/common","@angular/cdk/drag-drop","@angular/flex-layout","@angular/cdk/scrolling","@angular/router"],t):t((e=e||self)["ssoe-client-shared"]={},e.ng.core,e.cloneDeep,e.ng.common.http,e.rxjs,e.rxjs.operators,e.ng.material,e.ng.forms,e.ng.material.dialog,e.ng.material["snack-bar"],e.ng.common,e.ng.cdk["drag-drop"],e.ng["flex-layout"],e.ng.cdk.scrolling,e.ng.router)}(this,(function(e,t,r,n,o,i,a,s,l,c,u,p,d,f,m){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function y(e,t){function r(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}var b=function(){function e(){}return e.isNullEmptyOrUndefined=function(e){return null===e||""===e||void 0===e||"null"===e},e.isNumber=function(e){return"number"==typeof e&&isFinite(e)},e.deepClone=function(e){return r(e)},e.trimLastComma=function(e){return e=e.replace(/,\s*$/,"")},e.trimLastSlash=function(e){return e.replace(/\/$/,"")},e.sum=function(e,t){return t.reduce((function(t,r){return t+(r[e]||0)}),0)},e.newTechnicalNumber=function(){return"xxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e.regexMatch=function(e,t){var r=e.exec(t);return null!==r&&null!==r.find((function(e){return e===t}))},e}(),C=function(){function e(e){this.http=e}return e.prototype.delayInit=function(){return new Promise((function(e,t){setTimeout((function(){e()}),10)}))},e.prototype.getConfiguration=function(e){var t=this;return this.http.get(e.apiUrl+"/"+e.getConfigEndpoint).toPromise().then((function(e){return t.configurations=e,t.configurations})).catch((function(e){}))},e.prototype.getConfig=function(){return this.configurations},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:n.HttpClient}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.HttpClient))},token:e,providedIn:"root"}),e}();var S=function(){function e(e,t){this.http=e,this.configService=t}return e.prototype.formatErrors=function(e){return console.error(e),o.throwError(e.error)},e.prototype.get=function(e,t,r){return void 0===r&&(r=new n.HttpParams),this.http.get(this.getApiUrl()+"/"+e+"/"+t,{params:r}).pipe(i.catchError(this.formatErrors))},e.prototype.put=function(e,t,r){return void 0===r&&(r={}),this.http.put(""+this.getApiUrl()+e+"/"+t,JSON.stringify(r)).pipe(i.catchError(this.formatErrors))},e.prototype.post=function(e,t,r,n,o){var a;return void 0===n&&(n={}),void 0===o&&(o=!1),r=void 0!==r?"/"+r:"",!0===o&&(a={withCredentials:!0}),this.http.post(this.getApiUrl()+"/"+e+"/"+t+r,JSON.stringify(n),a).pipe(i.catchError(this.formatErrors))},e.prototype.postFile=function(e,t,r,n,o,a){var s;return void 0===n&&(n={}),void 0===o&&(o=!1),r=void 0!==r?"/"+r:"",!0===o&&(s={withCredentials:!0}),this.http.post(this.getApiUrl()+"/"+e+"/"+t+r,n,{withCredentials:s,reportProgress:a,observe:"events"}).pipe(i.catchError(this.formatErrors))},e.prototype.delete=function(e,t){return this.http.delete(this.getApiUrl()+"/"+e+"/"+t).pipe(i.catchError(this.formatErrors))},e.prototype.uploadFile=function(e,t,r,n,o){var i=new FormData;return i.append("file",r,r.name),this.http.post(this.configService.getConfig().apiUrl+"/"+e+"/"+t+"/"+n+"/"+o,i)},e.prototype.getApiUrl=function(){return this.configService.getConfig().apiUrl},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:n.HttpClient},{type:C}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(n.HttpClient),t.ɵɵinject(C))},token:e,providedIn:"root"}),e}();var I=function(){function e(e){this.apiService=e,this.translations={},this.cultureChange=new o.Subject}return e.prototype.setCultureCode=function(e){this._cultureCode=e,this.cultureCode=Date.now()},e.prototype.getCultureCode=function(){return this._cultureCode},e.prototype.getTranslations=function(e){var t=this,r=new n.HttpParams;return void 0!==e&&(r=r.append("cultureCode",e)),this.apiService.get("common","getTranslations",r).pipe(i.tap((function(e){for(var r=[],n=0;n<e.value.length;n++){var o=e.value[n];r.push({key:o.key,value:o.value})}t.setTranslations(r),t.cultureChange.next(),t.cultureCode=Date.now()})))},e.prototype.setTranslations=function(e){this.translations={};for(var t=0;t<e.length;t++){var r=e[t];this.translations[r.key]=r.value}localStorage.setItem("translations",JSON.stringify(this.translations))},e.prototype.getForKey=function(e){var t=e;if(b.isNullEmptyOrUndefined(e)||"-"===e)return e;var r=this.translations[e];return b.isNullEmptyOrUndefined(r)?(console.log(e),this.translations[e]="["+e+"]",t="["+e+"]"):t=r,t},e.prototype.getForKeyByObject=function(e){var t=e;if(b.isNullEmptyOrUndefined(e)||"-"===e)return e;var r=this.translations[e];if(b.isNullEmptyOrUndefined(r)){var n=e.split("_")[1];t=this.translations[n]}else t=r;return t},e.prototype.loadStorage=function(){var e=localStorage.getItem("translations");if(null!=e){var t=JSON.parse(e);this.translations=t}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:S}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(S))},token:e,providedIn:"root"}),e}();var N=function(){function e(e,t,r){this.data=e,this.dialogRef=t,this.translateService=r}return Object.defineProperty(e.prototype,"showText",{get:function(){return!b.isNullEmptyOrUndefined(this.data.text)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTranslatedText",{get:function(){return!b.isNullEmptyOrUndefined(this.data.translatedText)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOkButton",{get:function(){return!b.isNullEmptyOrUndefined(this.data.confirmLabel)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showCloseButton",{get:function(){return!b.isNullEmptyOrUndefined(this.data.cancelLabel)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ok=function(){void 0!==this.data.action&&this.data.action(this.data.parameters),this.dialogRef.close(!0)},e.prototype.close=function(){this.dialogRef.close()},e.decorators=[{type:t.Component,args:[{selector:"app-confirm-dialog",template:'<div mat-dialog-title>\r\n  {{data.title | translate: translateService.cultureCode}}\r\n</div>\r\n<div mat-dialog-content>\r\n  <mat-card>\r\n    <mat-card-content>\r\n      <div *ngIf="showText">\r\n        {{data.text | translate: translateService.cultureCode}}\r\n      </div>\r\n      <div *ngIf="showTranslatedText">\r\n        {{data.translatedText}}\r\n      </div>\r\n    </mat-card-content>\r\n  </mat-card>\r\n</div>\r\n<div mat-dialog-actions class="m-t-10">\r\n  <span fxFlex></span>\r\n  <button mat-raised-button color="accent" class="cancelBtn" (click)="close()" *ngIf="showCloseButton">{{data.cancelLabel | translate: translateService.cultureCode}}</button>\r\n  <button mat-raised-button color="primary" class="doneBtn" (click)="ok()" *ngIf="showOkButton">{{data.confirmLabel | translate: translateService.cultureCode}}</button>\r\n</div>\r\n',styles:[".mat-card{box-shadow:none;padding-left:0!important}.mat-dialog-title{padding-left:15px}.mat-dialog-actions{margin-bottom:-14px}"]}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[a.MAT_DIALOG_DATA]}]},{type:a.MatDialogRef},{type:I}]},e}();var M=function(){function e(e){this.dialog=e}return e.prototype.onClick=function(e){var t={title:"Confirm publish tender",text:"This action is irrevertible, are you sure?",translatedText:void 0,confirmLabel:"Confirm",cancelLabel:"Cancel",action:this.action,parameters:this.parameters};this.dialog.open(N,{panelClass:"modal-small",data:t})},e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Directive,args:[{selector:"[confirmAction]"}]}],e.ctorParameters=function(){return[{type:a.MatDialog}]},e.propDecorators={action:[{type:t.Input,args:["confirmAction"]}],parameters:[{type:t.Input}],onClick:[{type:t.HostListener,args:["click"]}]},e}();var V=function(){function e(e,t){this.data=e,this.translationService=t}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"app-error-dialog",template:'<h1 mat-dialog-title>{{\'There are errors\' | translate: translationService.cultureCode}}</h1>\r\n<div mat-dialog-content>\r\n  <div fxLayout="column">\r\n    <span class="mat-h4 m-t-15 mat-error" *ngFor="let error of data.errors" fxFlex>{{error}}</span>\r\n  </div>\r\n</div>\r\n<div mat-dialog-actions>\r\n</div>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[a.MAT_DIALOG_DATA]}]},{type:I}]},e}();var E=function(){this.isCleanup=!1};var O=function(){function e(e,t,r){this.translationService=e,this.dialog=t,this.snackBar=r,this.propertyValidationErrors={},this.errorMessagesSubject=new o.Subject,this.errorPropertyMessageSubject=new o.Subject,this.removeFormErrorsSubject=new o.Subject}return e.prototype.showErrorDialog=function(e){this.dialog.open(V,{data:{errors:e},panelClass:"dialog-error"})},e.prototype.publishMessages=function(e,t){var r,n=new E;n.source=t,n.errors=[];var o=this.propertyValidationErrors[t];if(void 0!==o){for(var i=[],a=[],s=function(t){var r=o[t],n=e.find((function(e){return e.propertyName===r.propertyName}));void 0!==n?(n.isCleanup=!1,a.push(n)):(r.isCleanup=!0,i.push(r))},l=0;l<o.length;l++)s(l);var c=function(t){var r=e[t];void 0===o.find((function(e){return e.propertyName===r.propertyName}))&&(r.isCleanup=!1,a.push(r))};for(l=0;l<e.length;l++)c(l);this.propertyValidationErrors[t]=a;for(l=0;l<i.length;l++){var u=i[l];this.publishPropertyMessage(u)}}else{for(l=0;l<e.length;l++){(u=e[l]).isCleanup=!1}this.propertyValidationErrors[t]=e}for(l=0;l<this.propertyValidationErrors[t].length;l++){u=this.propertyValidationErrors[t][l];this.publishPropertyMessage(u)}var p=e.filter((function(e){return"popup"===e.propertyName}));for(l=0;l<p.length;l++){u=p[l];(r=n.errors).push.apply(r,v(u.errorMessage.split("###")))}this.propertyValidationErrors[t].length>0&&0===p.length&&"login"!==t&&this.snackBar.open(this.translationService.getForKey("There were errors!"),null,{duration:2e3,verticalPosition:"top",panelClass:"danger"}),this.errorMessagesSubject.next(n)},e.prototype.clearMessages=function(e){var t=new E;t.source=e,t.isCleanup=!0,this.errorMessagesSubject.next(t)},e.prototype.publishPropertyMessage=function(e){this.errorPropertyMessageSubject.next(e)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:I},{type:a.MatDialog},{type:a.MatSnackBar}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(I),t.ɵɵinject(l.MatDialog),t.ɵɵinject(c.MatSnackBar))},token:e,providedIn:"root"}),e}();var j=function(){function e(e,t){this.form=e,this.errorService=t}return e.prototype.ngOnInit=function(){var e=this;this.errorService.errorPropertyMessageSubject.subscribe((function(t){if(b.isNullEmptyOrUndefined(e.form.form.get(t.propertyName))||!1!==t.isCleanup)b.isNullEmptyOrUndefined(e.form.form.get(t.propertyName))||!0!==t.isCleanup||e.form.form.setErrors(null);else{var r=e.form.form.get(t.propertyName);r.setErrors({incorrect:!0}),r.markAsDirty(),r.markAsTouched()}})),this.errorService.removeFormErrorsSubject.subscribe((function(t){e.form.form.setErrors(null)}))},e.decorators=[{type:t.Directive,args:[{selector:"form[formValidator]"}]}],e.ctorParameters=function(){return[{type:s.NgForm},{type:O}]},e}();var P=function(){function e(e){this.el=e,this.regexStr="^[0-9]*$"}return e.prototype.onKeyPress=function(e){return new RegExp(this.regexStr).test(e.key)},e.decorators=[{type:t.Directive,args:[{selector:"[numberFormatter]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={isAlphaNumeric:[{type:t.Input}],onKeyPress:[{type:t.HostListener,args:["keypress",["$event"]]}]},e}();var x=function(){function e(e){this.translationService=e}return e.prototype.transform=function(e,t){if(b.isNullEmptyOrUndefined(e))return"-";var r=e?"Evaluated (accepted)":"Evaluated (rejected)";return this.translationService.getForKey(r)},e.decorators=[{type:t.Pipe,args:[{name:"booleanEvaluateStatusToString"}]}],e.ctorParameters=function(){return[{type:I}]},e}();var D=function(){function e(e){this.translationService=e}return e.prototype.transform=function(e,t){var r=e?"Yes":"No";return this.translationService.getForKey(r)},e.decorators=[{type:t.Pipe,args:[{name:"booleanToYesNo"}]}],e.ctorParameters=function(){return[{type:I}]},e}();var F=function(){function e(e){this.apiService=e,this.classificationCache={},this.classificationValueCache={}}return e.prototype.getClassificationValues=function(e,t,r){if(void 0===r&&(r=!1),!b.isNullEmptyOrUndefined(e)){var n=e+(t=b.isNullEmptyOrUndefined(t)?"":"?model="+t);return!0===r?this.apiService.get("common","GetClassification/"+e+t):(void 0===this.classificationCache[n]&&(this.classificationCache[n]=this.apiService.get("common","GetClassification/"+e+t).pipe(i.shareReplay(1))),this.classificationCache[n])}},e.prototype.getGroupedClassificationValues=function(e,t,r){if(void 0===r&&(r=!1),!b.isNullEmptyOrUndefined(e)){var n=e+(t=b.isNullEmptyOrUndefined(t)?"":"?model="+t);return!0===r?this.apiService.get("common","GetGroupedClassification/"+e+t):(void 0===this.classificationCache[n]&&(this.classificationCache[n]=this.apiService.get("common","GetGroupedClassification/"+e+t).pipe(i.shareReplay(1))),this.classificationCache[n])}},e.prototype.getClassificationValue=function(e){if(b.isNullEmptyOrUndefined(e))return o.of("-");var t=e;if(void 0===this.classificationValueCache[t]){var r=(new n.HttpParams).set("valueId",""+e);this.classificationValueCache[t]=this.apiService.get("common","getClassificationValue",r).pipe(i.shareReplay(1),i.switchMap((function(e){return null==e||void 0===e.value?"":o.of(e)})))}return this.classificationValueCache[t]},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:S}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(S))},token:e,providedIn:"root"}),e}();var T=function(){function e(e){this.classificationService=e}return e.prototype.transform=function(e,t){return null==e||"object"==typeof e?"":this.classificationService.getClassificationValue(e)},e.decorators=[{type:t.Pipe,args:[{name:"classificationValueGet"}]}],e.ctorParameters=function(){return[{type:F}]},e}();var w=function(){function e(){}return e.prototype.transform=function(e,t){return null==e||void 0===e.value||null===e.value?"-":e.value.caption},e.decorators=[{type:t.Pipe,args:[{name:"classificationValue"}]}],e}(),k=function(){function e(){}return e.currencyCodes={941:"RSD",978:"EUR",840:"USD",826:"GBP"},e.quantityCodes={1:"pcs",2:"pack",3:"kg"},e.DATE_FMT="d.M.yyyy",e.DATE_TIME_FMT=e.DATE_FMT+" H:mm",e}();var U=function(){function e(){this.decimalPipe=new u.DecimalPipe("sr-Latn-ME")}return e.prototype.transform=function(e,t){if(b.isNullEmptyOrUndefined(e)||b.isNullEmptyOrUndefined(e.amount))return"";var r=""+this.decimalPipe.transform(e.amount,"1.2-2");return b.isNullEmptyOrUndefined(e.currencyCode)||(r+=" "+(void 0!==k.currencyCodes[e.currencyCode]?k.currencyCodes[e.currencyCode]:"")),r},e.decorators=[{type:t.Pipe,args:[{name:"currencyAmmount"}]}],e}();var A=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return y(r,e),r.prototype.transform=function(t,r){return e.prototype.transform.call(this,t,k.DATE_TIME_FMT)},r.decorators=[{type:t.Pipe,args:[{name:"dateTimeFormat"}]}],r}(u.DatePipe),L=function(){function e(){}return e.prototype.transform=function(e,t){return b.isNullEmptyOrUndefined(e)?"-":e},e.decorators=[{type:t.Pipe,args:[{name:"emptyStringToDefault"}]}],e}(),R=function(){function e(){this.statuses={1:"Ready",2:"Active",4:"Canceled",8:"Completed",16:"Terminated",32:"Suspend",64:"Published",128:"Deleted",256:"Deactivated",512:"PublishPending"}}return e.prototype.transform=function(e,t){var r=this.statuses[e];return void 0===r?e:r},e.decorators=[{type:t.Pipe,args:[{name:"lifecycleStatus"}]}],e.ctorParameters=function(){return[]},e}();var _=function(){function e(){}return e.prototype.transform=function(e,t){var r=""+e.amount;return void 0!==e.unitOfMeasure&&(r+=" "+e.unitOfMeasure),r},e.decorators=[{type:t.Pipe,args:[{name:"quantity"}]}],e}(),q=function(){function e(e){this.translationService=e}return e.prototype.transform=function(e,t,r){if(null!=t)return b.isNullEmptyOrUndefined(r)?this.translationService.getForKey(e):this.translationService.getForKeyByObject(e)},e.decorators=[{type:t.Pipe,args:[{name:"translate"}]}],e.ctorParameters=function(){return[{type:I}]},e}();var B=function(){function e(e,t){this.elementRef=e,this.ngModel=t,this.locale="sr-Latn-ME",this.rgx=/^\d*((\,|\.)\d*)?(?!\w)$/g,this.el=this.elementRef.nativeElement,this.decimalFormatPipe=new u.DecimalPipe("sr-Latn-ME")}return e.prototype.ngOnInit=function(){null==this.decimals&&(this.decimals="1.2-2"),this.el.value=this.decimalFormatPipe.transform(this.el.value,this.decimals,this.locale),"0"===this.el.value&&(this.el.value="")},e.prototype.onFocus=function(e){this.el.value=this.ngModel.viewModel,this.lastValue=this.ngModel.viewModel},e.prototype.onBlur=function(e){try{this.ngModel.viewModel=this.el.value;var t=this.el.value.replace(",",".");this.el.value=this.decimalFormatPipe.transform(t,this.decimals,this.locale)}catch(e){!b.isNullEmptyOrUndefined(this.lastValue)&&b.regexMatch(this.rgx,this.lastValue)&&(this.el.value=this.decimalFormatPipe.transform(this.lastValue,this.decimals,this.locale),this.ngModel.viewModel=this.lastValue)}},e.prototype.onKeyPress=function(e){return this.lastValue=b.deepClone(e.target.value),"Comma"===e.code&&-1===this.lastValue.indexOf(",")||"Delete"===e.code||"Backspace"===e.code||!RegExp(/\D/).test(e.key)},e.decorators=[{type:t.Directive,args:[{selector:"[decimalFormatter][ngModel]",providers:[s.NgModel]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:s.NgModel}]},e.propDecorators={decimals:[{type:t.Input,args:["decimals"]}],onFocus:[{type:t.HostListener,args:["focus",["$event.target.value"]]}],onBlur:[{type:t.HostListener,args:["blur",["$event.target.value"]]}],onKeyPress:[{type:t.HostListener,args:["keydown",["$event"]]}]},e}();var K=function(){function e(e){var r=this;this.autoComplete=e,this.tressholdPercent=.8,this.scroll=new t.EventEmitter,this._onDestroy=new o.Subject,this.autoComplete.opened.pipe(i.tap((function(){setTimeout((function(){r.removeScrollEventListener(),r.autoComplete.panel.nativeElement.addEventListener("scroll",r.onScroll.bind(r))}),1)})),i.takeUntil(this._onDestroy)).subscribe(),this.autoComplete.closed.pipe(i.tap((function(){return r.removeScrollEventListener()})),i.takeUntil(this._onDestroy)).subscribe()}return e.prototype.removeScrollEventListener=function(){b.isNullEmptyOrUndefined(this.autoComplete.panel)||this.autoComplete.panel.nativeElement.removeEventListener("scroll",this.onScroll)},e.prototype.ngOnDestroy=function(){this._onDestroy.next(),this._onDestroy.complete(),this.removeScrollEventListener()},e.prototype.onScroll=function(e){if(void 0===this.tressholdPercent)this.scroll.next({autoComplete:this.autoComplete,scrollEvent:e});else{var t=100*this.tressholdPercent*this.autoComplete.panel.nativeElement.scrollHeight/100;this.autoComplete.panel.nativeElement.scrollTop+this.autoComplete.panel.nativeElement.clientHeight>t&&this.scroll.next({autoComplete:this.autoComplete,scrollEvent:e})}},e.decorators=[{type:t.Directive,args:[{selector:"mat-autocomplete[optionsScroll]"}]}],e.ctorParameters=function(){return[{type:a.MatAutocomplete}]},e.propDecorators={tressholdPercent:[{type:t.Input}],scroll:[{type:t.Output,args:["optionsScroll"]}]},e}();var H=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[],exports:[a.MatToolbarModule,a.MatButtonModule,a.MatSidenavModule,a.MatIconModule,a.MatListModule,a.MatFormFieldModule,a.MatInputModule,a.MatButtonToggleModule,a.MatChipsModule,a.MatBadgeModule,a.MatSlideToggleModule,a.MatCardModule,a.MatMenuModule,a.MatDividerModule,a.MatProgressSpinnerModule,a.MatRadioModule,a.MatCheckboxModule,a.MatGridListModule,a.MatTooltipModule,a.MatExpansionModule,a.MatSelectModule,a.MatDatepickerModule,a.MatProgressBarModule,a.MatSliderModule,a.MatStepperModule,a.MatDialogModule,a.MatTabsModule,a.MatNativeDateModule,d.FlexLayoutModule,a.MatSnackBarModule,s.FormsModule,s.ReactiveFormsModule,a.MatTableModule,a.MatPaginatorModule,a.MatSortModule,a.MatChipsModule,a.MatAutocompleteModule,a.MatTreeModule,p.DragDropModule,f.ScrollingModule]}]}],e}(),G=function(){function e(){this.changeSubject=new o.Subject}return e.prototype.change=function(){this.changeSubject.next()},e.prototype.clear=function(){this.infoTemplate=void 0,this.actionsTemplate=void 0,this.spacerTemplate=void 0,this.actionsContextTemplate=void 0,this.change()},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var $=function(){function e(e,t){this.actionsRibbonService=e,this.cd=t}return e.prototype.ngOnInit=function(){var e=this;this.actionsRibbonService.changeSubject.subscribe((function(t){e.cd.markForCheck()}))},e.decorators=[{type:t.Component,args:[{selector:"app-actions-ribbon",template:'<div class="ribbon" *ngIf="!(actionsRibbonService.infoTemplate === undefined\r\n&& actionsRibbonService.spacerTemplate === undefined\r\n&& actionsRibbonService.actionsTemplate === undefined\r\n&& actionsRibbonService.actionsContextTemplate === undefined)">\r\n  <div class="ribbon-info">\r\n    <ng-template [ngTemplateOutlet]="actionsRibbonService.infoTemplate">\r\n    </ng-template>\r\n  </div>\r\n  <ng-template [ngTemplateOutlet]="actionsRibbonService.spacerTemplate">\r\n  </ng-template>\r\n  <span fxFlex></span><span fxFlex></span>\r\n  <div class="action ribbon-context-action" [class.last]="actionsRibbonService.actionsTemplate === undefined"\r\n    [class.has-action]="actionsRibbonService.actionsContextTemplate !== undefined">\r\n    <ng-template [ngTemplateOutlet]="actionsRibbonService.actionsContextTemplate">\r\n    </ng-template>\r\n  </div>\r\n  <div class="action ribbon-actions" [class.has-action]="actionsRibbonService.actionsTemplate !== undefined">\r\n    <ng-template [ngTemplateOutlet]="actionsRibbonService.actionsTemplate">\r\n    </ng-template>\r\n  </div>\r\n</div>\r\n',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[".ribbon{background-color:#dd2638;color:#fff;min-height:70px}"]}]}],e.ctorParameters=function(){return[{type:G},{type:t.ChangeDetectorRef}]},e}();var J=function(){function e(e,t){this.activatedRoute=e,this.route=t}return e.prototype.ngOnInit=function(){},e.prototype.setUpTab=function(){var e=this;this.activatedRoute.queryParams.subscribe((function(t){t.tab&&(e.tabSelectedIndex=+t.tab,e.route.navigate([],{queryParams:{tab:null},queryParamsHandling:"merge"}))}))},e.prototype.navigateToTabWithSubject=function(e,t){t[e].next()},e.decorators=[{type:t.Component,args:[{selector:"app-base-selected-tab",template:"\n    <p>\n      NO UI TO BE FOUND HERE!\n    </p>\n  ",styles:[""]}]}],e.ctorParameters=function(){return[{type:m.ActivatedRoute},{type:m.Router}]},e}();var W=function(){function e(e,r,n,o){this.classificationService=e,this.translationService=r,this.errorMessageService=n,this.formObject=o,this.classificationValueIdChange=new t.EventEmitter,this.objectClassificationValueChange=new t.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.classificationService.getGroupedClassificationValues(this.classificationName,this.classificationModel,this.isVolatile).subscribe((function(t){for(var r=[],n=0;n<t.value.length;n++){r=v(r,t.value[n].options)}if(e.options=r,e.defaultValue=e.options.find((function(e){return!0===e.isDefaultValue})),e.groups=t.value,b.isNullEmptyOrUndefined(e.classificationValueId))if(b.isNullEmptyOrUndefined(e.selectedValue))b.isNullEmptyOrUndefined(e.defaultValue)||(e.classificationValueId=e.defaultValue.id,e.objectClassificationValueChange.emit(e.defaultValue));else{var o;void 0!==(o=e.options.find((function(t){return""+t.value==""+e.selectedValue})))&&(e.classificationValueId=o.id,e.objectClassificationValueChange.emit(o))}else void 0!==(o=e.options.find((function(t){return""+t.id==""+e.classificationValueId})))?(e.classificationValueId=o.id,e.objectClassificationValueChange.emit(o)):(e.classificationValueId=void 0,e.classificationValueIdChange.emit(e.classificationValueId));void 0===e.disabled&&(e.disabled=!1)})),void 0===this.propertyName&&(this.propertyName=b.newTechnicalNumber()),b.isNullEmptyOrUndefined(this.ngFormObject)&&(this.form=this.ngFormObject),b.isNullEmptyOrUndefined(this.form)&&(this.form=this.formObject),this.ngControl=new s.FormControl,void 0!==this.form&&null!==this.form&&void 0!==this.propertyName&&this.form.form.addControl(this.propertyName,this.ngControl),this.errorMessageService.errorPropertyMessageSubject.subscribe((function(t){b.isNullEmptyOrUndefined(e.form.form.get(t.propertyName))||!1!==t.isCleanup?b.isNullEmptyOrUndefined(e.form.form.get(t.propertyName))||!0!==t.isCleanup||(e.hasErrors=!1,e.form.form.get(t.propertyName).setErrors(null)):(e.form.form.get(t.propertyName).setErrors({incorrect:!0}),e.hasErrors=!0)})),this.errorMessageService.removeFormErrorsSubject.subscribe((function(t){e.hasErrors=!1,b.isNullEmptyOrUndefined(e.form.form.get(e.propertyName)&&void 0!==e.propertyName)||e.form.form.get(e.propertyName).setErrors(null)}))},e.prototype.change=function(e){var t=this;this.classificationValueId=e.value,this.classificationValueIdChange.emit(this.classificationValueId);var r=this.options.find((function(e){return""+e.id==""+t.classificationValueId}));void 0!==r&&this.objectClassificationValueChange.emit(r);this.propertyName;this.form.form.markAsDirty(),this.form.form.patchValue({pname:this.classificationValueId})},e.decorators=[{type:t.Component,args:[{selector:"app-classification-group-input",template:'<form formValidator>\n  <mat-form-field>\n    <mat-select [name]="propertyName" placeholder="{{placeholder}}" (selectionChange)="change($event)" [(ngModel)]="classificationValueId" [disabled]="disabled">\n      <mat-optgroup *ngFor="let group of groups" [label]="group.description | translate: translationService.cultureCode">\n        <mat-option *ngFor="let option of group.options" [value]="option.id" matTooltip="{{option.description | translate: translationService.cultureCode}}">\n          {{option.caption | translate: translationService.cultureCode}}\n        </mat-option>\n      </mat-optgroup>\n    </mat-select>\n    <mat-error app-input-validation-message [propertyName]="propertyName"></mat-error>\n  </mat-form-field>\n</form>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:F},{type:I},{type:O},{type:s.NgForm,decorators:[{type:t.Optional}]}]},e.propDecorators={classificationValueId:[{type:t.Input}],classificationName:[{type:t.Input}],classificationModel:[{type:t.Input}],placeholder:[{type:t.Input}],isVolatile:[{type:t.Input}],propertyName:[{type:t.Input}],selectedValue:[{type:t.Input}],disabled:[{type:t.Input}],ngFormObject:[{type:t.Input}],classificationValueIdChange:[{type:t.Output}],objectClassificationValueChange:[{type:t.Output}]},e}();var Y=function(){function e(e,r,n,o){this.classificationService=e,this.translationService=r,this.errorMessageService=n,this.formObject=o,this.classificationValueIdChange=new t.EventEmitter,this.objectClassificationValueChange=new t.EventEmitter,b.isNullEmptyOrUndefined(this.ngFormObject)&&(this.form=this.ngFormObject),b.isNullEmptyOrUndefined(this.form)&&(this.form=this.formObject)}return e.prototype.ngOnInit=function(){var e=this;this.classificationService.getClassificationValues(this.classificationName,this.classificationModel,this.isVolatile).subscribe((function(t){if(e.defaultValue=t.value.find((function(e){return!0===e.isDefaultValue})),e.options=t.value,b.isNullEmptyOrUndefined(e.classificationValueId))if(b.isNullEmptyOrUndefined(e.selectedValue)){if(!b.isNullEmptyOrUndefined(e.defaultValue)){e.classificationValueId=e.defaultValue.id,e.objectClassificationValueChange.emit(e.defaultValue);e.propertyName;e.form.form.patchValue({pName:e.defaultValue.id})}}else{var r;void 0!==(r=e.options.find((function(t){return""+t.value==""+e.selectedValue})))&&(e.classificationValueId=r.id,e.classificationValueIdChange.emit(r.id),e.objectClassificationValueChange.emit(r))}else void 0!==(r=e.options.find((function(t){return""+t.id==""+e.classificationValueId})))?(e.classificationValueId=r.id,e.classificationValueIdChange.emit(r.id),e.objectClassificationValueChange.emit(r)):(e.classificationValueId=void 0,e.classificationValueIdChange.emit(void 0),e.classificationValueIdChange.emit(e.classificationValueId));void 0===e.disabled&&(e.disabled=!1)})),void 0===this.propertyName&&(this.propertyName=b.newTechnicalNumber()),this.ngControl=new s.FormControl,void 0!==this.form&&null!==this.form&&void 0!==this.propertyName&&this.form.form.addControl(this.propertyName,this.ngControl),this.errorMessageService.errorPropertyMessageSubject.subscribe((function(t){b.isNullEmptyOrUndefined(e.form.form.get(t.propertyName))||!1!==t.isCleanup?b.isNullEmptyOrUndefined(e.form.form.get(t.propertyName))||!0!==t.isCleanup||(e.hasErrors=!1,e.form.form.get(t.propertyName).setErrors(null)):(e.form.form.get(t.propertyName).setErrors({incorrect:!0}),e.hasErrors=!0)})),this.errorMessageService.removeFormErrorsSubject.subscribe((function(t){e.hasErrors=!1,b.isNullEmptyOrUndefined(e.form.form.get(e.propertyName)&&void 0!==e.propertyName)||e.form.form.get(e.propertyName).setErrors(null)})),void 0!==this.resetToDefault&&this.resetToDefault.subscribe((function(t){b.isNullEmptyOrUndefined(e.defaultValue)||(e.classificationValueId=e.defaultValue.id,e.classificationValueIdChange.emit(e.defaultValue.id),e.objectClassificationValueChange.emit(e.defaultValue))}))},e.prototype.change=function(e){var t=this;this.classificationValueId=e.value,this.classificationValueIdChange.emit(this.classificationValueId);var r=this.options.find((function(e){return""+e.id==""+t.classificationValueId}));void 0!==r&&this.objectClassificationValueChange.emit(r);this.propertyName;this.form.form.markAsDirty(),this.form.form.patchValue({pname:this.classificationValueId})},e.decorators=[{type:t.Component,args:[{selector:"app-classification-input",template:'  <form formValidator>\r\n    <mat-form-field>\r\n      <mat-select [name]="propertyName" placeholder="{{placeholder}}" (selectionChange)="change($event)" [(ngModel)]="classificationValueId" [disabled]="disabled">\r\n        <mat-option *ngFor="let option of options" [value]="option.id" matTooltip="{{option.description | translate: translationService.cultureCode}}">\r\n          {{option.caption | translate: translationService.cultureCode}}\r\n        </mat-option>\r\n      </mat-select>\r\n      <mat-error app-input-validation-message [propertyName]="propertyName"></mat-error>\r\n    </mat-form-field>\r\n  </form>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:F},{type:I},{type:O},{type:s.NgForm,decorators:[{type:t.Optional}]}]},e.propDecorators={classificationValueId:[{type:t.Input}],classificationName:[{type:t.Input}],classificationModel:[{type:t.Input}],placeholder:[{type:t.Input}],isVolatile:[{type:t.Input}],propertyName:[{type:t.Input}],selectedValue:[{type:t.Input}],disabled:[{type:t.Input}],resetToDefault:[{type:t.Input}],ngFormObject:[{type:t.Input}],classificationValueIdChange:[{type:t.Output}],objectClassificationValueChange:[{type:t.Output}]},e}();var z=function(){function e(e,r,n){this.classificationService=e,this.errorMessageService=r,this.formObject=n,this.showCurrency=!0,this.currencyAmountChange=new t.EventEmitter,this.currencies=[]}return e.prototype.ngOnInit=function(){void 0===this.propertyName&&(this.propertyName=b.newTechnicalNumber()),b.isNullEmptyOrUndefined(this.ngFormObject)&&(this.form=this.ngFormObject),b.isNullEmptyOrUndefined(this.form)&&(this.form=this.formObject),this.ngControlAmount=new s.FormControl,this.ngControlCurrency=new s.FormControl,void 0!==this.form&&(this.form.form.addControl(this.propertyName+"Amount",this.ngControlAmount),this.form.form.addControl(this.propertyName+"CurrencyCode",this.ngControlCurrency)),this.getCurrency()},e.prototype.getCurrency=function(){var e=this;this.classificationService.getClassificationValues("ShortCurrency").subscribe((function(t){if(!b.isNullEmptyOrUndefined(t)&&!b.isNullEmptyOrUndefined(t.value)){e.currencies=t.value;var r=e.currencies.find((function(e){return!0===e.isDefaultValue}));e.currencyAmount.currencyCode=r.value,e.currencyAmountChange.emit(e.currencyAmount)}}))},e.decorators=[{type:t.Component,args:[{selector:"app-currency-amount",template:'<form class="amountComponent" formValidator>\r\n  <div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="1%" fxLayoutAlign="center">\r\n      <div fxFlex="80%">\r\n        <mat-form-field>\r\n          <input matInput [name]="propertyName+\'Amount\'" type="text" placeholder="{{placeholder}}"\r\n          [readonly]="isReadOnly"  [(ngModel)]="currencyAmount.amount"\r\n          #amountInput="ngModel" decimalFormatter\r\n          (ngModelChange)="currencyAmountChange.emit(currencyAmount)" >\r\n          <mat-error app-input-validation-message [propertyName]="propertyName+\'Amount\'"></mat-error>\r\n        </mat-form-field>\r\n      </div>\r\n      <div fxFlex="20%" *ngIf="showCurrency">\r\n        <mat-form-field>\r\n          <mat-select [name]="propertyName+\'CurrencyCode\'" [(ngModel)]="currencyAmount.currencyCode" [disabled]="isReadOnly">\r\n              <mat-option *ngFor="let currency of currencies" [value]="currency.value">\r\n                  {{currency.caption}}\r\n              </mat-option>\r\n          </mat-select>\r\n          <mat-error app-input-validation-message [propertyName]="propertyName+\'CurrencyCode\'"></mat-error>\r\n        </mat-form-field>\r\n      </div>\r\n    </div>\r\n</form>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:F},{type:O},{type:s.NgForm}]},e.propDecorators={currencyAmount:[{type:t.Input}],isReadOnly:[{type:t.Input}],placeholder:[{type:t.Input}],propertyName:[{type:t.Input}],showCurrency:[{type:t.Input}],ngFormObject:[{type:t.Input}],currencyAmountChange:[{type:t.Output}]},e}();var Q=function(){function e(e,t){this.errorService=e,this.dialog=t,this.showDialog=!1}return e.prototype.ngOnInit=function(){var e=this;b.isNullEmptyOrUndefined(this.source)||(this.sources=[],this.source=this.source.toLowerCase(),this.sources=this.source.split(",")),this.subscriptionSubscriber=this.errorService.errorMessagesSubject.subscribe((function(t){void 0!==e.sources?void 0!==e.sources.find((function(e){return e===t.source}))&&(!0===t.isCleanup?e.errors=[]:e.showDialog&&void 0!==t.errors&&t.errors.length>0?e.dialog.open(V,{data:{errors:t.errors},panelClass:"dialog-error"}):e.errors=t.errors):e.errors=t.errors}))},e.prototype.ngOnDestroy=function(){this.subscriptionSubscriber.closed||this.subscriptionSubscriber.unsubscribe()},e.decorators=[{type:t.Component,args:[{selector:"app-error-display",template:'<div>\r\n  <div fxLayout="column">\r\n    <span fxFlex class="mat-h4 m-t-15 mat-error" *ngFor="let error of errors">\r\n      {{error}}\r\n    </span>\r\n  </div>\r\n</div>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:O},{type:a.MatDialog}]},e.propDecorators={errors:[{type:t.Input}],source:[{type:t.Input}],showDialog:[{type:t.Input}]},e}();var X=function(){function e(e){this.translationService=e}return e.prototype.ngOnInit=function(){},e.decorators=[{type:t.Component,args:[{selector:"app-general-error-page",template:"<div>\n  <span class=\"h2\">{{'Unexpected error happened, please try again' | translate: translationService.cultureCode}}</span>\n</div>\n",styles:[""]}]}],e.ctorParameters=function(){return[{type:I}]},e}();var Z=function(){function e(e){this.errorMessageService=e}return e.prototype.ngOnInit=function(){var e=this;this.errorMessageService.errorPropertyMessageSubject.subscribe((function(t){e.propertyName===t.propertyName&&!1===t.isCleanup?e.errors=t.errorMessage.split("###"):e.propertyName===t.propertyName&&!0===t.isCleanup&&(e.errors=[])})),this.errorMessageService.removeFormErrorsSubject.subscribe((function(t){e.errors=[]}))},e.decorators=[{type:t.Component,args:[{selector:"[app-input-validation-message]",template:'<span *ngFor="let error of errors">{{error}}</span>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:O}]},e.propDecorators={propertyName:[{type:t.Input}]},e}();var ee=function(){function e(){this.loadingSubject=new o.Subject,this.moduleLoadingSubject=new o.Subject}return e.prototype.loader=function(e){this.loadingSubject.next(e)},e.prototype.moduleLoading=function(e){this.moduleLoadingSubject.next(e)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var te=function(){function e(e,t){this.loaderService=e,this.cd=t,this.loadingStatus=0}return e.prototype.ngOnInit=function(){var e=this;this.loaderService.loadingSubject.subscribe((function(t){!0===t?e.loadingStatus++:e.loadingStatus--,e.loadingStatus<0&&(e.loadingStatus=0),e.cd.markForCheck()}))},e.decorators=[{type:t.Component,args:[{selector:"app-loader",template:'<div class=" loading-shade" *ngIf="loadingStatus > 0">\r\n  <mat-spinner></mat-spinner>\r\n</div>\r\n',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[""]}]}],e.ctorParameters=function(){return[{type:ee},{type:t.ChangeDetectorRef}]},e}();var re=function(){function e(e,t,r){this.data=e,this.dialogRef=t,this.translateService=r,this.saveDataText="Save data?",this.bodyText="You have unsaved changes! Do you want to continue?"}return e.prototype.ngOnInit=function(){b.isNullEmptyOrUndefined(this.data)||(b.isNullEmptyOrUndefined(this.data.saveDataText)||(this.saveDataText=this.data.saveDataText),b.isNullEmptyOrUndefined(this.data.bodyText)||(this.bodyText=this.data.bodyText))},e.decorators=[{type:t.Component,args:[{selector:"app-notification-dialog-unsaved",template:'<h1 mat-dialog-title>{{saveDataText | translate : translateService.cultureCode}}</h1>\r\n<div mat-dialog-content>\r\n    <mat-card>\r\n        <mat-card-content>\r\n           <div>{{bodyText | translate : translateService.cultureCode}}</div>\r\n        </mat-card-content>\r\n    </mat-card>\r\n\r\n</div>\r\n<div mat-dialog-actions class="m-t-10">\r\n  <button mat-dialog-close mat-raised-button color="accent">{{\'No\' | translate : translateService.cultureCode}}</button>\r\n  <button  mat-raised-button color="primary" [mat-dialog-close]="true">{{\'Yes\' | translate : translateService.cultureCode}}</button>\r\n</div>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[a.MAT_DIALOG_DATA]}]},{type:a.MatDialogRef},{type:I}]},e}();var ne=function(){function e(e,r){this.translationService=e,this.form=r,this.quantityChange=new t.EventEmitter,this.units=[]}return e.prototype.ngOnInit=function(){this.getUnits(),void 0===this.propertyName&&(this.propertyName=b.newTechnicalNumber()),this.ngControlAmount=new s.FormControl,this.ngControlUnitOfMeasure=new s.FormControl,void 0!==this.form&&(this.form.form.addControl(this.propertyName+"Amount",this.ngControlAmount),this.form.form.addControl(this.propertyName+"UnitOfMeasure",this.ngControlUnitOfMeasure))},e.prototype.getUnits=function(){},e.decorators=[{type:t.Component,args:[{selector:"app-quantity",template:'<form class="quantity-component" formValidator>\r\n    <div class="" fxLayout="row" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="1%" fxLayoutAlign="center">\r\n        <div fxFlex="80%">\r\n          <mat-form-field>\r\n              <input matInput type="number" [name]="propertyName+\'Amount\'" placeholder="{{placeholder}}" [readonly]="isReadOnly" [(ngModel)]="quantity.amount" (ngModelChange)="quantityChange.emit(quantity)" step=".01">\r\n              <mat-error app-input-validation-message [propertyName]="propertyName+\'Amount\'"></mat-error>\r\n          </mat-form-field>\r\n        </div>\r\n        <div fxFlex="20%">\r\n          <mat-form-field>\r\n            <input matInput type="text" [name]="propertyName+\'UnitOfMeasure\'" placeholder="{{\'Unit of measure\'| translate : translationService.cultureCode}}" [(ngModel)]="quantity.unitOfMeasure" (ngModelChange)="quantityChange.emit(quantity)">\r\n            <mat-error app-input-validation-message [propertyName]="propertyName+\'UnitOfMeasure\'"></mat-error>\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n  </form>\r\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:I},{type:s.NgForm}]},e.propDecorators={quantity:[{type:t.Input}],isReadOnly:[{type:t.Input}],placeholder:[{type:t.Input}],propertyName:[{type:t.Input}],quantityChange:[{type:t.Output}]},e}();var oe=function(){function e(e){this.apiService=e}return e.prototype.search=function(e){var t=new n.HttpParams;return t=t.append("typeName",e.typename).append("searchTerm",e.searchTerm).append("skip",""+e.skip).append("top",""+e.top),this.apiService.get("common","search",t)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:S}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(S))},token:e,providedIn:"root"}),e}();var ie=function(){function e(e,r,n,i){this.searchService=e,this.translateService=r,this.formObject=n,this.errorMessageService=i,this.typeaheadSkipValue=6,this.minNumOfCharToSearch=3,this.readonly=!1,this.hasErrors=!1,this.isLoading=!1,this.nextPage=new o.Subject,this.valueChosen=!1,this.typeaheadValueChange=new t.EventEmitter,this.typeaheadSelectedValueChange=new t.EventEmitter,this.inputChangeSubject=new o.Subject,this.nextPage=new o.Subject,this.skip=0,this.top=this.typeaheadSkipValue,this.results=[]}return e.prototype.ngOnInit=function(){var e=this;o.merge(this.inputChangeSubject.pipe(i.debounceTime(400),i.distinctUntilChanged((function(t,r){return r.length<e.minNumOfCharToSearch||t===r||(e.resetFilter(),!1)}))),this.nextPage.pipe(i.distinctUntilChanged((function(e,t){return e===t})))).pipe(i.switchMap((function(t){if(b.isNullEmptyOrUndefined(e.currentValue)||e.currentValue.length<e.minNumOfCharToSearch)return e.resetFilter(),o.of({value:[]});var r=null;return e.isLoading=!0,r=void 0===e.filterFormatFn?{name:e.currentValue}:e.filterFormatFn(e.currentValue),e.searchService.search({typename:e.typename,searchTerm:JSON.stringify(r),skip:e.skip,top:e.top})}))).subscribe((function(t){t.value.length===e.typeaheadSkipValue&&(e.skip+=e.typeaheadSkipValue),e.results=v(e.results,t.value),e.autocomplete.opened.next(),e.isLoading=!1})),void 0===this.propertyName&&(this.propertyName=b.newTechnicalNumber()),b.isNullEmptyOrUndefined(this.ngFormObject)&&(this.form=this.ngFormObject),b.isNullEmptyOrUndefined(this.form)&&(this.form=this.formObject),this.ngControl=new s.FormControl,void 0!==this.form&&this.form.form.addControl(this.propertyName,this.ngControl),this.errorMessageService.errorPropertyMessageSubject.subscribe((function(t){b.isNullEmptyOrUndefined(e.form.form.get(t.propertyName))||!1!==t.isCleanup?b.isNullEmptyOrUndefined(e.form.form.get(t.propertyName))||!0!==t.isCleanup||(e.hasErrors=!1,e.form.form.get(t.propertyName).setErrors(null)):(e.form.form.get(t.propertyName).setErrors({incorrect:!0}),e.form.form.get(t.propertyName).markAsDirty(),e.form.form.get(t.propertyName).markAsTouched(),e.hasErrors=!0)})),this.errorMessageService.removeFormErrorsSubject.subscribe((function(t){e.hasErrors=!1,b.isNullEmptyOrUndefined(e.form.form.get(e.propertyName)&&void 0!==e.propertyName)||e.form.form.get(e.propertyName).setErrors(null)})),void 0!==this.selectedValue&&this.selectedValue.hasOwnProperty("id")&&(this.valueChosen=!0)},e.prototype.onScroll=function(){this.nextPage.next(this.skip)},e.prototype.search=function(e){this.currentValue=e.target.value,b.isNullEmptyOrUndefined(this.currentValue)?this.skip=0:(8!==e.keyCode&&46!==e.keyCode||this.clearSelectedValue(),this.inputChangeSubject.next(this.currentValue))},e.prototype.optionSelected=function(e){this.typeaheadValue=e.option.value.id,this.selectedValue=e.option.value,this.valueChosen=!0,this.currentValue=this.displayResultFn(e.option.value),this.typeaheadSelectedValueChange.emit(this.selectedValue),this.typeaheadValueChange.emit(this.typeaheadValue);this.propertyName;this.form.form.markAsDirty(),this.form.form.patchValue({pname:this.typeaheadValue})},e.prototype.clearSelectedValue=function(){this.typeaheadValue=void 0,this.selectedValue=void 0,this.currentValue="",this.valueChosen=!1,this.typeaheadSelectedValueChange.emit(this.selectedValue),this.typeaheadValueChange.emit(this.typeaheadValue)},Object.defineProperty(e.prototype,"checkHasValue",{get:function(){return!(this.valueChosen||void 0!==this.selectedValue&&null!==this.selectedValue&&this.selectedValue.hasOwnProperty("id"))},enumerable:!0,configurable:!0}),e.prototype.resetFilter=function(){this.results=[],this.skip=0,this.valueChosen=!1,this.top=this.typeaheadSkipValue},e.decorators=[{type:t.Component,args:[{selector:"app-typeahead-input",template:'<form formValidator>\r\n  <mat-form-field>\r\n    <input matInput [name]="propertyName" placeholder="{{placeholder}}" readonly="{{readonly}}" [matAutocomplete]="autocomplete" (keyup)="search($event)" [(ngModel)]="selectedValue" >\r\n    <mat-icon matSuffix *ngIf="checkHasValue" class="errorValue" matTooltip="Value not selected">error_outline</mat-icon>\r\n    <mat-icon matSuffix *ngIf="isLoading" matTooltip="Values loading">autorenew</mat-icon>\r\n    <mat-autocomplete #autocomplete="matAutocomplete" [displayWith]="displayResultFn" (optionsScroll)="onScroll()" (optionSelected)="optionSelected($event)" showPanel="true">\r\n      <mat-option *ngFor="let result of results" [value]="result">\r\n        <span>{{displayResultFn(result)}}</span>\r\n      </mat-option>\r\n    </mat-autocomplete>\r\n    <mat-hint [hidden]="!hasErrors">{{\'Type to search\' | translate: translateService.cultureCode}}</mat-hint>\r\n    <mat-error app-input-validation-message [propertyName]="propertyName"></mat-error>\r\n  </mat-form-field>\r\n</form>\r\n',styles:[".errorValue{color:#c40308}"]}]}],e.ctorParameters=function(){return[{type:oe},{type:I},{type:s.NgForm},{type:O}]},e.propDecorators={typeaheadValue:[{type:t.Input}],placeholder:[{type:t.Input}],typename:[{type:t.Input}],selectedValue:[{type:t.Input}],filterFormatFn:[{type:t.Input}],displayResultFn:[{type:t.Input}],propertyName:[{type:t.Input}],readonly:[{type:t.Input}],ngFormObject:[{type:t.Input}],typeaheadValueChange:[{type:t.Output}],typeaheadSelectedValueChange:[{type:t.Output}],autocomplete:[{type:t.ViewChild,args:["autocomplete",{static:!1}]}],autocompleteTrigger:[{type:t.ViewChild,args:[a.MatAutocompleteTrigger,{static:!1}]}]},e}();var ae=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[$,J,W,Y,N,z,Q,V,X,Z,te,re,ne,ie,M,j,P,x,D,T,w,U,A,L,R,_,q,B,K],imports:[u.CommonModule,H],exports:[M,j,P,x,D,T,w,U,A,L,R,_,q,$,J,W,Y,N,z,Q,V,X,Z,te,re,ne,ie],entryComponents:[V,N,re]}]}],e}(),se=function(){function e(e,t){this.apiService=e,this.translateService=t,this.locationCache={}}return e.prototype.post=function(e,t,r){return this.apiService.post(e,t,void 0,r)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:S},{type:I}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(S),t.ɵɵinject(I))},token:e,providedIn:"root"}),e}();var le=function(){function e(e,t){this.apiService=e,this.http=t}return e.prototype.get=function(e,t,r){for(var o=new n.HttpParams,i=Object.entries(r),a=0;a<i.length;a++){var s=i[a];o=o.append(s[0],s[1])}return this.apiService.get(e,t,o)},e.prototype.getBlobDocument=function(e,t){return this.http.get(this.apiService.getApiUrl()+"/"+e+"/"+t,{responseType:"blob",observe:"response"})},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:S},{type:n.HttpClient}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(S),t.ɵɵinject(n.HttpClient))},token:e,providedIn:"root"}),e}();var ce=function(e){function r(t){var r=e.call(this)||this;return r.translationService=t,r.getRangeLabel=function(e,t,n){if(0===n||0===t)return r.zeroOfLabel+" "+n;var o=e*t;return o+1+" - "+(o<(n=Math.max(n,0))?Math.min(o+t,n):o+t)+" "+r.ofLabel+" "+n},r.itemsPerPageLabel=r.translationService.getForKey("Items per page"),r.nextPageLabel=r.translationService.getForKey("Next page"),r.ofLabel=r.translationService.getForKey("of"),r.previousPageLabel=r.translationService.getForKey("Previous page"),r.firstPageLabel=r.translationService.getForKey("First page"),r.lastPageLabel=r.translationService.getForKey("Last page"),r.zeroOfLabel=r.translationService.getForKey("0 of"),r.changes.next(),r.translationService.cultureChange.subscribe((function(e){r.itemsPerPageLabel=r.translationService.getForKey("Items per page"),r.nextPageLabel=r.translationService.getForKey("Next page"),r.ofLabel=r.translationService.getForKey("of"),r.previousPageLabel=r.translationService.getForKey("Previous page"),r.firstPageLabel=r.translationService.getForKey("First page"),r.lastPageLabel=r.translationService.getForKey("Last page"),r.zeroOfLabel=r.translationService.getForKey("0 of"),r.changes.next()})),r}return y(r,e),r.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],r.ctorParameters=function(){return[{type:I}]},r.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new r(t.ɵɵinject(I))},token:r,providedIn:"root"}),r}(a.MatPaginatorIntl);var ue=function(){function e(e){this.dialog=e,this.hasChangedData=!1}return e.prototype.startTracking=function(e){var t=this;this.currentForm=e,this.currentForm.form.markAsPristine(),this.formChangesSubscription=e.form.valueChanges.subscribe((function(e){t.currentForm.form.dirty&&(t.hasChangedData=!0)}))},e.prototype.trackingCheckpoint=function(){this.currentForm.form.markAsPristine(),this.hasChangedData=!1},e.prototype.stopTracking=function(){this.hasChangedData=!1,this.formChangesSubscription.unsubscribe()},e.prototype.doActionWithCheckUnsaved=function(e,t,r){var n=this;this.hasChangedData?this.dialog.open(re,{width:"356px",data:r}).afterClosed().subscribe((function(r){!0===r?(n.hasChangedData=!1,e()):void 0!==t&&t()})):e()},e.prototype.checkChangesAction=function(e,t,r){var n=this;this.hasChangedData?this.dialog.open(re,{width:"356px",data:r}).afterClosed().subscribe((function(r){!0===r?(n.hasChangedData=!1,e()):t()})):t()},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:a.MatDialog}]},e}();e.ActionsRibbonService=G,e.ApiService=S,e.BooleanEvaluateStatusToStringPipe=x,e.BooleanToYesNoPipe=D,e.ClassificationService=F,e.ClassificationValueGet=T,e.ClassificationValuePipe=w,e.CommandService=se,e.ConfigService=C,e.ConfirmActionDirective=M,e.CurrencyPipe=U,e.DateTimeFormatPipe=A,e.DecimalFormatterDirective=B,e.EmptyStringToDefaultPipe=L,e.ErrorMessagesService=O,e.FormValidatorDirective=j,e.LifecycleStatusPipe=R,e.LoadingService=ee,e.NumberFormatterDirective=P,e.OptionsScrollDirective=K,e.PaginatorI18nService=ce,e.QuantityPipe=_,e.QueryService=le,e.SearchService=oe,e.SharedModule=ae,e.TranslatePipe=q,e.TranslationService=I,e.UnsavedDataNotificationService=ue,e.ɵa=$,e.ɵb=J,e.ɵc=W,e.ɵd=Y,e.ɵe=N,e.ɵf=z,e.ɵg=Q,e.ɵh=V,e.ɵi=X,e.ɵj=Z,e.ɵk=te,e.ɵl=re,e.ɵm=ne,e.ɵn=ie,e.ɵo=H,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ssoe-client-shared.umd.min.js.map